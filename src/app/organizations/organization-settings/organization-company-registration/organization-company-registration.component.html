<div *ngIf="data!=null;else loading" class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <form [formGroup]="registeredOfficeDetails">

                    <div class="row">

                        <div class="col-6">
                            <div class="input m-0">
                                <input formControlName="name" type="text" autocomplete="off" name="name" required>
                                <label class="input-text">Company name</label>
                                <div *ngIf="formInvalid || getformElem('name').invalid && (getformElem('name').dirty || getformElem('name').touched)" class="text-danger">
                                  <div *ngIf="getformElem('name').errors?.required">
                                    Company name is required
                                  </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-6">
                            <div class="input m-0">
                                <input formControlName="CIN" type="text" autocomplete="off" name="CIN" required>
                                <label class="input-text">Company identification number (CIN)</label>
                                <div *ngIf="formInvalid || getformElem('CIN').invalid && (getformElem('CIN').dirty || getformElem('CIN').touched)" class="text-danger">
                                  <div *ngIf="getformElem('CIN').errors?.required">
                                    CIN is required
                                  </div>
                                  <div *ngIf="getformElem('CIN').errors?.pattern">
                                    CIN must be 21 numbers long
                                  </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-6">
                            <div class="input m-0">
                                <input formControlName="GSTIN" type="text" autocomplete="off" name="GSTIN" onkeyup="this.value = this.value.toUpperCase();" required>
                                <label class="input-text">GSTIN</label>
                                <div *ngIf="formInvalid || getformElem('GSTIN').invalid && (getformElem('GSTIN').dirty || getformElem('GSTIN').touched)" class="text-danger">
                                    <div *ngIf="getformElem('GSTIN').errors?.required">
                                      GSTIN number is required
                                    </div>
                                    <div *ngIf="getformElem('GSTIN').errors?.pattern">
                                      GSTIN must be 15 numbers long
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="address-heading">Address</div>
                    <div class="address-container">
                        <div class="row" formGroupName="address">
                            <div class="col-6">
                                <div class="input m-0">
                                    <input formControlName="addressLine1" type="text" autocomplete="off"
                                        name="addressLine1" required>
                                    <label class="input-text">Address line 1</label>
                                    <div *ngIf="formInvalid || getformElem('address.addressLine1').invalid && (getformElem('address.addressLine1').dirty || getformElem('address.addressLine1').touched)" class="text-danger">
                                      <div *ngIf="getformElem('address.addressLine1').errors?.required">
                                        Address line 1 is required
                                      </div>
                                      <div *ngIf="getformElem('address.addressLine1').errors?.pattern">
                                        Address line is invalid
                                      </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-6">
                                <div class="input m-0">
                                    <input formControlName="addressLine2" type="text" autocomplete="off">
                                    <label class="input-text">Address line 2</label>
                                    <div *ngIf="formInvalid || getformElem('address.addressLine2').invalid && (getformElem('address.addressLine2').dirty || getformElem('address.addressLine2').touched)" class="text-danger">
                                      <div *ngIf="getformElem('address.addressLine2').errors?.pattern">
                                        Address line is invalid
                                      </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-6">
                                <div class="input m-0">
                                    <input formControlName="city" type="text" autocomplete="off" name="city" required>
                                    <label class="input-text">City</label>
                                    <div *ngIf="formInvalid || getformElem('address.city').invalid && (getformElem('address.city').dirty || getformElem('address.city').touched)" class="text-danger">
                                        <div *ngIf="getformElem('address.city').errors?.required">
                                          City is required
                                        </div>
                                        <div *ngIf="getformElem('address.city').errors?.pattern">
                                          City is invalid
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-6">
                                <div class="input m-0">
                                    <input formControlName="code" type="text" autocomplete="off" name="code" required>
                                    <label class="input-text">Zipcode</label>
                                    <div *ngIf="formInvalid || getformElem('address.code').invalid && (getformElem('address.code').dirty || getformElem('address.code').touched)" class="text-danger">
                                      <div *ngIf="getformElem('address.code').errors?.required">
                                        Zipcode is required
                                      </div>
                                      <div *ngIf="getformElem('address.code').errors?.pattern">
                                        Zipcode is invalid
                                      </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-6">
                                <div class="input m-0">
                                    <input formControlName="regionState" type="text" autocomplete="off"
                                        name="regionState" required>
                                    <label class="input-text">State</label>
                                    <div *ngIf="formInvalid || (getformElem('address.regionState').invalid && (getformElem('address.regionState').dirty || getformElem('address.regionState').touched))" class="text-danger">
                                      <div *ngIf="getformElem('address.regionState').errors?.required">
                                        State is required
                                      </div>
                                      <div *ngIf="getformElem('address.regionState').errors?.pattern">
                                        State is invalid
                                      </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-6">
                                <div class="input m-0">
                                    <input formControlName="country" type="text" autocomplete="off" name="country"
                                        required>
                                    <label class="input-text">Country</label>
                                    <div *ngIf="formInvalid || (getformElem('address.country').invalid && (getformElem('address.country').dirty || getformElem('address.country').touched))" class="text-danger">
                                      <div *ngIf="getformElem('address.country').errors?.required">
                                        Country is required
                                      </div>
                                      <div *ngIf="getformElem('address.country').errors?.pattern">
                                        Country name is invalid
                                      </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div formGroupName="emails" class="row">

                        <div class="col-3">
                            <div class="input m-0">
                                <input formControlName="email" type="text" autocomplete="off" name="email" required>
                                <label class="input-text">Email</label>
                                <div *ngIf="formInvalid || (getformElem('emails.email').invalid && (getformElem('emails.email').dirty || getformElem('emails.email').touched))" class="text-danger">
                                  <div *ngIf="getformElem('emails.email').errors?.required">
                                    Email is required
                                  </div>
                                  <div *ngIf="getformElem('emails.email').errors?.email">
                                    Email is invalid
                                  </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div formGroupName="phoneNumbers" class="row">

                        <div class="col-3">
                            <div class="input m-0">
                                <input formControlName="number" type="tel"
                                    pattern="^\s*(?:\+?(\d{1,3}))?[-. (]*(\d{3})[-. )]*(\d{3})[-. ]*(\d{4})(?: *x(\d+))?\s*$"
                                    autocomplete="off" name="number" required>
                                <label class="input-text">Phone</label>
                                <div *ngIf="formInvalid || (getformElem('phoneNumbers.number').invalid && (getformElem('phoneNumbers.number').dirty || getformElem('phoneNumbers.number').touched))" class="text-danger">
                                  <div *ngIf="getformElem('phoneNumbers.number').errors?.required">
                                    Phone is required
                                  </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div formGroupName="faxNumbers" class="row">

                        <div class="col-6">
                            <div class="input m-0">
                                <input formControlName="number" type="text" autocomplete="off">
                                <label class="input-text">Fax (Optional)</label>
                                <div *ngIf="formInvalid || (getformElem('faxNumbers.number').invalid && (getformElem('faxNumbers.number').dirty || getformElem('faxNumbers.number').touched))" class="text-danger">
                                  <div *ngIf="getformElem('faxNumbers.number').errors?.pattern">
                                    Fax number is invalid
                                  </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="mt-3">
                        <button (click)="updateOrganization(registeredOfficeDetails)"
                            class="btn btn-primary btn-medium"><i *ngIf="check" class="fa fa-circle-o-notch fa-spin"></i>&nbsp;Update information</button>
                            
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<ng-template #loading>
    <ai-loading></ai-loading>
</ng-template>
